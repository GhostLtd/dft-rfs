{% macro attributes(attr) %}
    {{ block('attributes', 'form_div_layout.html.twig') }}
{% endmacro %}

{% macro breadcrumbs(params) -%}
    {%- strict false -%}
        {%- include '@GhostGovUkFrontend/components/breadcrumbs/template.html.twig' -%}
    {% endstrict -%}
{%- endmacro %}

{% macro footer(params) -%}
    {%- strict false -%}
        {%- include '@GhostGovUkFrontend/components/footer/template.html.twig' -%}
    {% endstrict -%}
{%- endmacro %}

{% macro header(params) -%}
    {%- strict false -%}
        {%- include '@GhostGovUkFrontend/components/header/template.html.twig' -%}
    {% endstrict -%}
{%- endmacro %}

{% macro phaseBanner(params) -%}
    {%- strict false -%}
        {%- include '@GhostGovUkFrontend/components/phase-banner/template.html.twig' -%}
    {% endstrict -%}
{%- endmacro %}

{% macro skipLink(params) -%}
    {%- strict false -%}
        {%- include '@GhostGovUkFrontend/components/skip-link/template.html.twig' -%}
    {% endstrict -%}
{%- endmacro %}

{% macro summaryList() -%}
    {%- strict false -%}
        {%- include '@GhostGovUkFrontend/components/summary-list/template.html.twig' -%}
    {% endstrict -%}
{%- endmacro %}

{% macro tag(params) -%}
    {%- strict false -%}
        {%- include '@GhostGovUkFrontend/components/tag/template.html.twig' -%}
    {% endstrict -%}
{%- endmacro %}

{% macro buttonLink(href, text, options) -%}
    <a href="{{ href }}" role="button" draggable="false" class="govuk-button {{ options.class | default("") }}" data-module="govuk-button">
        {{- text -}}
    </a>
{%- endmacro %}

{% macro optionalActionsSummaryListRow(showActions, key, value, actions, options) -%}
    {%- if showActions -%}
        {{- _self.summaryListRow(key, value, actions, options) -}}
    {%- else -%}
        {{- _self.actionlessSummaryListRow(key, value, options) -}}
    {%- endif -%}
{%- endmacro %}

{% macro actionlessSummaryListRow(key, value, options) -%}
    {{- _self.summaryListRow(key, value, null, options | default({}) | merge({hideActions: true})) -}}
{%- endmacro %}

{% macro summaryListRow(key, value, actions, options) -%}
    <div class="govuk-summary-list__row {{ options.row_class | default('') }}">
        <dt class="govuk-summary-list__key">{{ key | trans | nl2br }}</dt>
        <dd class="govuk-summary-list__value">{{ value | nl2br }}</dd>
        {% if not (options.hideActions | default(false)) %}
            <dd class="govuk-summary-list__actions">
                {{- _self.actionLinks(actions) -}}
            </dd>
        {% endif %}
    </div>
{%- endmacro %}

{% macro actionLinks(actionLinks) %}
    {%- if actionLinks | length == 1 -%}
        {{- _self.actionLink((actionLinks | keys) | first, actionLinks | first) -}}
    {%- else -%}
        <ul class="govuk-summary-list__actions-list">
            {%- for url, action in actionLinks -%}
                <li class="govuk-summary-list__actions-list-item">
                    {{- _self.actionLink(url, action) -}}
                </li>
            {%- endfor -%}
        </ul>
    {%- endif -%}
{% endmacro %}

{# action can either be string with action, or array [action, actionHidden] #}
{% macro actionLink(url, action) -%}
    {%- if action | default(false) -%}
        {%- if action is iterable -%}
            {%- set actionHidden = action[1] -%}
            {%- set action = action[0] -%}
        {%- endif -%}
        <a class="govuk-link" href="{{ url }}">
            {{- action | trans }}{% if actionHidden | default(false) %}<span class="govuk-visually-hidden"> {{ actionHidden | trans }}</span>{% endif -%}
        </a>
    {%- endif -%}
{%- endmacro %}


{% macro tableHead(caption, columnHeadings, options) -%}
    {%- if caption | default(false) %}<caption class="govuk-table__caption">{{ caption }}</caption>{% endif -%}
    <thead class="govuk-table__head">
        <tr class="govuk-table__row">
            {%- for heading in columnHeadings -%}
                {% with {
                    options: options[heading] | default({}) | merge({
                    class: ('govuk-table__header '
                            ~ ((options[heading].actions | default(false)) or (options[heading].numeric | default(false)) ? 'govuk-table__header--numeric ' : '')
                            ~ (options[heading].class | default(''))
                        ) | trim
                    })
                } %}
                    <th scope="col" class="{{ options.class }}">{{ heading }}</th>
                {% endwith %}
            {%- endfor -%}
        </tr>
    </thead>
{%- endmacro %}

{% macro tableCell(value, options) -%}
    {% with {
        options: options | default({}) | merge({
            class: ('govuk-table__cell '
                ~ ((options.actions | default(false)) or (options.numeric | default(false)) ? 'govuk-table__cell--numeric ' : '')
                ~ (options.class | default(''))
            ) | trim
        })
    } %}
    <td class="{{ options.class }}"
            {%- if options.colSpan | default(false) %} colspan="{{ options.colSpan }}"{% endif -%}
    >{{ value }}</td>
    {% endwith %}
{%- endmacro %}


{% macro tabsHead(tabs, options) -%}
    {%- set options = {
        selected: (tabs | keys | first) | default(''),
    } | merge(options | default({})) -%}
    <h2 class="govuk-tabs__title">
        Contents
    </h2>
    <ul class="govuk-tabs__list">
        {%- for label, tab in tabs -%}
            {%- set tabId = (tab is iterable) ? tab.id : tab -%}
            {%- set tabOptions = (tab is iterable) ? tab.options : {} -%}
            <li class="govuk-tabs__list-item {% if label == options.selected %}govuk-tabs__list-item--selected{% endif %}">
                <a class="govuk-tabs__tab" href="#{{ tabId }}">
                    {{- label -}}
                </a>
            </li>
        {%- endfor -%}
    </ul>
{%- endmacro %}

